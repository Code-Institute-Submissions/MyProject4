{% extends 'base.html' %}
{% load staticfiles %}
{% load bootstrap_tags %}
{% block page_title %}Tickets | {% endblock %}
{% block page_heading %}Tickets{% endblock %}

{% block content %}
<!-- Log Bug or Feature Section - Asks user to log in/register if not logged in -->
<div class="container text-center form-box">
	<!-- BUG SECTION -->
	<div class="form-box mx-auto">
		<h1 class="font-weight-bold headers">Bugs</h1>
		{% if user.is_authenticated %}
		<p class="bold">
			Noticed an issue?
			<br>
                    Submit a new Bug Report!
                </p>
			<p class="italic">
				Bug Reports are FREE to open!
			</p>
			<a href="{% url 'new_bug_ticket' %}" class="btn btn-primary">
				<i class="fa fa-bug icon-left" aria-hidden="true"></i>
				New Bug
			</a>
			{% else %}
			<p>
				Noticed an issue?
			</p>
			<p>
				<a href="{% url 'login' %}">
					Login
				</a>
				or
				<a href="{% url 'registration' %}">
					Register
				</a>
				to submit a Bug Report.
			</p>
			{% endif %}
	</div>
</div>
<div class="container text-center form-box">
	<!--feature-->
	<div class="form-box mx-auto">
		<h1 class="card-title center-align">Features</h1>
		{% if user.is_authenticated %}
		<p class="bold">
			Want something new?
			<br>
                    Submit a new Feature Request!
                </p>
			<p class="italic">
				Feature Requests require a small donation!
			</p>
			<a href="{% url 'new_feature_ticket' %}" class="btn btn-primary" aria-label="New Feature Page">
				<i class="fa fa-cogs icon-left" aria-hidden="true"></i>
				New Feature
			</a>
			{% else %}
			<p class="bold">
				Want something new?
			</p>
			<p>
				<a href="{% url 'login' %}" aria-label="Login Page">
					Login
				</a>
				or
				<a href="{% url 'registration' %}" aria-label="Registration Page">
					Register
				</a>
				to submit a Feature Request.
			</p>
			{% endif %}
	</div>
</div>

<div class="container text-center form-box">
	{% for ticket in tickets %}
	<div class="ticket-type center-align">
		<!-- Ticket Type  -->
		{% if ticket.TicketType.TicketType == "Bug" %}
		<i class="fa fa-bug" aria-hidden="true"></i>
		{% elif ticket.TicketType.TicketType == "Feature" %}
		<i class="fa fa-cogs" aria-hidden="true"></i>
		{% endif %}
	</div>
	<!-- Ticket Title -->
	<div class="form-box mx-auto">
		<h4>{{ ticket.title }}</h4>
		<!-- Ticket Details -->

		<p>
			<i class="fa fa-ticket" aria-hidden="true"></i>
			{{ ticket.TicketType }}
		</p>
		<p>
			<i class="fa fa-tools" aria-hidden="true"></i>
			{{ ticket.TicketStatus }}
		</p>
		<p>
			<i class="fa fa-user"></i>
			{{ ticket.user.username }}
		</p>
		<p>
			{{ ticket.description }}
		</p>

		<!-- Ticket Quick Stats -->

		<!-- Views -->
		<span>
            <i class="fa fa-eye"></i>
            {{ ticket.views }}
        </span>
		<span>
        <!-- Upvotes -->
            <i class="fa fa-thumbs-up"></i>
            {{ ticket.upvotes }}
        </span>
	</div>
	<hr>
	{% endfor %}
</div>

{% endblock %}